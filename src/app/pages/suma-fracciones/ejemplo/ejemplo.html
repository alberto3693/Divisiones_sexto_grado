<div class="ejemplo-container">
  <h1>üí° Ejemplos de Suma de Fracciones</h1>

  <!-- Secci√≥n 1: Fracciones con igual denominador -->
  <section class="ejercicios-section">
    <h2>1. Calcula y explica c√≥mo lo haces. Despu√©s, representa y comprueba la suma.</h2>
    
    <div class="ejercicios-grid">
      <div class="ejercicio-card" *ngFor="let ej of ejercicios; let i = index">
        <div class="ejercicio-header">
          <div class="operacion">
            <span *ngFor="let f of ej.fracciones; let j = index">
              <div class="fraccion-visual">
                <span class="num">{{f.numerador}}</span>
                <span class="linea"></span>
                <span class="den">{{f.denominador}}</span>
              </div>
              <span class="op" *ngIf="j < ej.fracciones.length - 1">+</span>
            </span>
          </div>
        </div>

        <div class="representacion-visual">
          <div class="grid-container" [style.grid-template-columns]="'repeat(' + ej.cuadros + ', 1fr)'">
            <div class="cuadro" *ngFor="let c of generarCuadros(ej.cuadros); let idx = index"
                 [class.pintado]="idx < ej.fracciones[0].numerador"
                 [class.pintado-alt]="idx >= ej.fracciones[0].numerador && idx < ej.fracciones[0].numerador + ej.fracciones[1].numerador">
            </div>
          </div>
          <div class="grid-container" [style.grid-template-columns]="'repeat(' + ej.cuadros + ', 1fr)'">
            <div class="cuadro" *ngFor="let c of generarCuadros(ej.cuadros); let idx = index"
                 [class.pintado]="idx < ej.fracciones[0].numerador + ej.fracciones[1].numerador">
            </div>
          </div>
        </div>

        <button class="btn-toggle" (click)="toggleSolucion(i)">
          {{ej.mostrarSolucion ? 'üîº Ocultar' : 'üîΩ Ver Soluci√≥n'}}
        </button>

        <div class="solucion" *ngIf="ej.mostrarSolucion">
          <p class="explicacion">
            <strong>Mismo denominador:</strong> Sumamos los numeradores
          </p>
          <div class="calculo-resultado">
            <span *ngFor="let f of ej.fracciones; let j = index">
              {{f.numerador}}<span *ngIf="j < ej.fracciones.length - 1"> + </span>
            </span>
            = {{calcularSumaIgual(ej.fracciones).numerador}}
          </div>
          <div class="resultado-final">
            <div class="fraccion-resultado">
              <span class="num">{{calcularSumaIgual(ej.fracciones).numerador}}</span>
              <span class="linea"></span>
              <span class="den">{{calcularSumaIgual(ej.fracciones).denominador}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Secci√≥n 2: Fracciones con distinto denominador -->
  <section class="ejercicios-section">
    <h2>2. Suma estas fracciones de distinto denominador.</h2>
    
    <div class="recuerda-box">
      <div class="recuerda-header">RECUERDA</div>
      <p>Antes de sumar, red√∫celas a com√∫n denominador.</p>
    </div>

    <div class="ejercicios-grid-small">
      <div class="ejercicio-mini" *ngFor="let ej of ejerciciosDiferente; let i = index">
        <div class="operacion-mini">
          <div class="fraccion-visual">
            <span class="num">{{ej.f1.numerador}}</span>
            <span class="linea"></span>
            <span class="den">{{ej.f1.denominador}}</span>
          </div>
          <span class="op">+</span>
          <div class="fraccion-visual">
            <span class="num">{{ej.f2.numerador}}</span>
            <span class="linea"></span>
            <span class="den">{{ej.f2.denominador}}</span>
          </div>
          <span *ngIf="ej.f3">
            <span class="op">+</span>
            <div class="fraccion-visual">
              <span class="num">{{ej.f3.numerador}}</span>
              <span class="linea"></span>
              <span class="den">{{ej.f3.denominador}}</span>
            </div>
          </span>
        </div>

        <button class="btn-mini" (click)="toggleSolucionDiferente(i)">
          {{ej.mostrarSolucion ? '‚ñ≤' : '‚ñº'}}
        </button>

        <div class="solucion-mini" *ngIf="ej.mostrarSolucion">
          <ng-container *ngIf="!ej.f3">
            <p><strong>MCM({{ej.f1.denominador}}, {{ej.f2.denominador}}) = {{calcularSumaDiferente(ej.f1, ej.f2).mcm}}</strong></p>
            <div class="conversion">
              <div class="fraccion-visual">
                <span class="num">{{calcularSumaDiferente(ej.f1, ej.f2).f1Conv.numerador}}</span>
                <span class="linea"></span>
                <span class="den">{{calcularSumaDiferente(ej.f1, ej.f2).mcm}}</span>
              </div>
              <span class="op">+</span>
              <div class="fraccion-visual">
                <span class="num">{{calcularSumaDiferente(ej.f1, ej.f2).f2Conv.numerador}}</span>
                <span class="linea"></span>
                <span class="den">{{calcularSumaDiferente(ej.f1, ej.f2).mcm}}</span>
              </div>
              <span class="op">=</span>
              <div class="fraccion-visual destacado">
                <span class="num">{{calcularSumaDiferente(ej.f1, ej.f2).resultado.numerador}}</span>
                <span class="linea"></span>
                <span class="den">{{calcularSumaDiferente(ej.f1, ej.f2).resultado.denominador}}</span>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </section>

  <nav class="navigation">
    <a routerLink="/concepto" class="btn btn-prev">‚¨ÖÔ∏è Concepto</a>
    <a routerLink="/" class="btn btn-home">üè† Inicio</a>
    <a routerLink="/ejercicio" class="btn btn-next">‚û°Ô∏è Practicar</a>
  </nav>
</div>