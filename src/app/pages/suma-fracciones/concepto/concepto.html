<div class="concepto-container">
  <h1>Suma de fracciones</h1>
  
  <!-- Secci√≥n de Concepto y Referencias -->
  <div class="concepto-teorico">
    <div class="concepto-header">
      <h2>üìö Concepto</h2>
      <button class="btn-referencias" (click)="toggleReferencias()">
        {{ mostrarReferencias ? 'üìñ Ocultar Referencias' : 'üìñ Ver Referencias' }}
      </button>
    </div>
    
    <div class="concepto-lista">
      <div class="concepto-item">
        <span class="numero">1</span>
        <p>La suma de fracciones es una <strong>operaci√≥n aritm√©tica de adici√≥n</strong> realizada entre dos n√∫meros fraccionarios o m√°s.</p>
        <span class="fuente">Fuente: Significados [1]</span>
      </div>

      <div class="concepto-item">
        <span class="numero">2</span>
        <p>Una <strong>fracci√≥n</strong> es una expresi√≥n matem√°tica que representa una parte de un todo, compuesta por dos n√∫meros separados por una l√≠nea horizontal: el <strong>numerador</strong>, que representa la cantidad de partes que se toman, y el <strong>denominador</strong>, que representa el total de partes en que se divide el todo.</p>
        <span class="fuente">Fuente: Universidad de las F√≥rmulas [2]</span>
      </div>

      <div class="concepto-item">
        <span class="numero">3</span>
        <p>Para que las fracciones se puedan sumar, es necesario que todas tengan el <strong>mismo denominador</strong>.</p>
        <span class="fuente">Fuente: Significados [1]</span>
      </div>

      <div class="concepto-item">
        <span class="numero">4</span>
        <p>La suma de fracciones m√°s sencilla es aquella donde los denominadores de cada fracci√≥n tienen en com√∫n el mismo n√∫mero, ya que el proceso de la suma se basa en <strong>sumar los numeradores y dejar el mismo denominador</strong>.</p>
        <span class="fuente">Fuente: Aula F√°cil [3]</span>
      </div>

      <div class="concepto-item">
        <span class="numero">5</span>
        <p>Para sumar fracciones de distinto denominador, debemos encontrar el <strong>com√∫n denominador</strong>, dividir el com√∫n denominador entre el denominador de cada una de las fracciones y multiplicar el resultado de cada divisi√≥n por su correspondiente numerador, y finalmente sumar todos los numeradores y escribir el denominador obtenido.</p>
        <span class="fuente">Fuente: Aula F√°cil [3]</span>
      </div>

      <div class="concepto-item">
        <span class="numero">6</span>
        <p>Cuando necesitamos encontrar el denominador com√∫n utilizamos el procedimiento del <strong>M√≠nimo Com√∫n M√∫ltiplo (MCM)</strong>.</p>
        <span class="fuente">Fuente: Aula F√°cil [3]</span>
      </div>
    </div>

    <!-- Referencias bibliogr√°ficas -->
    <div class="referencias-box" *ngIf="mostrarReferencias">
      <h3>üìñ Referencias Bibliogr√°ficas</h3>
      <div class="referencia">
        <span class="ref-numero">[1]</span>
        <a href="https://www.significados.com/suma-de-fracciones/" target="_blank" rel="noopener">
          Significados - Suma de fracciones
        </a>
      </div>
      <div class="referencia">
        <span class="ref-numero">[2]</span>
        <a href="https://www.universoformulas.com/matematicas/aritmetica/suma-fracciones/" target="_blank" rel="noopener">
          Universidad de las F√≥rmulas - Suma de fracciones
        </a>
      </div>
      <div class="referencia">
        <span class="ref-numero">[3]</span>
        <a href="https://www.aulafacil.com/cursos/matematicas-primaria/trabajando-con-fracciones/suma-de-fracciones-l31207" target="_blank" rel="noopener">
          Aula F√°cil - Suma de fracciones
        </a>
      </div>
    </div>
  </div>

  <!-- Historia del Huerto -->
  <div class="story-section">
    <div class="story-header">
      <h3>üå± Historia del Huerto de Marco</h3>
      <button class="btn-nuevo-ejemplo" (click)="nuevoEjemplo()">
        üîÑ Nuevo Ejemplo
      </button>
    </div>
    
    <div class="story-content">
      <p>Marco tiene una huerta y un jard√≠n.</p>
      <p>Ha plantado <span class="fraccion">{{ejemplo.tomates.numerador}}/{{ejemplo.tomates.denominador}}</span> de la huerta con tomates,</p>
      <p><span class="fraccion">{{ejemplo.pimientos.numerador}}/{{ejemplo.pimientos.denominador}}</span> con pimientos y <span class="fraccion">{{ejemplo.zanahorias.numerador}}/{{ejemplo.zanahorias.denominador}}</span> con zanahorias.</p>
      <p>Despu√©s, ha plantado <span class="fraccion">{{ejemplo.flores.numerador}}/{{ejemplo.flores.denominador}}</span> del jard√≠n con flores y <span class="fraccion">{{ejemplo.cesped.numerador}}/{{ejemplo.cesped.denominador}}</span> con c√©sped.</p>
      <p class="question">¬øQu√© fracci√≥n de la huerta ha plantado en total? ¬øY del jard√≠n?</p>
    </div>
    <div class="story-image">
      <div class="fallback-image">üå±üåªü•ïüçÖ</div>
    </div>
  </div>

  <div class="explicacion-grid">
    <!-- Suma con igual denominador -->
    <div class="explicacion-card">
      <div class="card-header">
        <span class="badge">De la huerta</span>
        <div class="operacion">
          Suma 
          <span class="fraccion-inline">{{ejemplo.tomates.numerador}}/{{ejemplo.tomates.denominador}}</span> + 
          <span class="fraccion-inline">{{ejemplo.pimientos.numerador}}/{{ejemplo.pimientos.denominador}}</span> + 
          <span class="fraccion-inline">{{ejemplo.zanahorias.numerador}}/{{ejemplo.zanahorias.denominador}}</span>
        </div>
      </div>
      
      <div class="card-body">
        <p class="regla">Las fracciones tienen <strong>igual denominador</strong>: suma los numeradores y deja el mismo denominador.</p>
        
        <div class="calculo">
          <div class="fraccion-suma">
            <span class="numerador">{{ejemplo.tomates.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.tomates.denominador}}</span>
          </div>
          <span class="operador">+</span>
          <div class="fraccion-suma">
            <span class="numerador">{{ejemplo.pimientos.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.pimientos.denominador}}</span>
          </div>
          <span class="operador">+</span>
          <div class="fraccion-suma">
            <span class="numerador">{{ejemplo.zanahorias.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.zanahorias.denominador}}</span>
          </div>
          <span class="operador">=</span>
          <div class="fraccion-suma">
            <span class="numerador">{{ejemplo.tomates.numerador}} + {{ejemplo.pimientos.numerador}} + {{ejemplo.zanahorias.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.tomates.denominador}}</span>
          </div>
          <span class="operador">=</span>
          <div class="fraccion-suma resultado">
            <span class="numerador">{{ejemplo.resultadoHuerta.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.resultadoHuerta.denominador}}</span>
          </div>
        </div>

        <p class="conclusion">Ha plantado <span class="fraccion-inline destacado">{{ejemplo.resultadoHuerta.numerador}}/{{ejemplo.resultadoHuerta.denominador}}</span> de la huerta.</p>
      </div>
    </div>

    <!-- Suma con diferente denominador -->
    <div class="explicacion-card">
      <div class="card-header">
        <span class="badge">Del jard√≠n</span>
        <div class="operacion">
          Suma 
          <span class="fraccion-inline">{{ejemplo.flores.numerador}}/{{ejemplo.flores.denominador}}</span> + 
          <span class="fraccion-inline">{{ejemplo.cesped.numerador}}/{{ejemplo.cesped.denominador}}</span>
        </div>
      </div>
      
      <div class="card-body">
        <p class="regla">Las fracciones tienen <strong>distinto denominador</strong>: red√∫celas a com√∫n denominador y despu√©s suma las fracciones de igual denominador.</p>
        
        <div class="paso-mcm">
          <p><strong>Paso 1:</strong> Encontrar el MCM de {{ejemplo.flores.denominador}} y {{ejemplo.cesped.denominador}} = <span class="destacado">{{ejemplo.mcmJardin}}</span></p>
        </div>

        <div class="calculo">
          <div class="fraccion-suma">
            <span class="numerador">{{ejemplo.flores.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.flores.denominador}}</span>
          </div>
          <span class="operador">+</span>
          <div class="fraccion-suma">
            <span class="numerador">{{ejemplo.cesped.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.cesped.denominador}}</span>
          </div>
          <span class="operador">=</span>
          <div class="fraccion-suma">
            <span class="numerador">{{calcularFraccionEquivalente(ejemplo.flores, ejemplo.mcmJardin).numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.mcmJardin}}</span>
          </div>
          <span class="operador">+</span>
          <div class="fraccion-suma">
            <span class="numerador">{{calcularFraccionEquivalente(ejemplo.cesped, ejemplo.mcmJardin).numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.mcmJardin}}</span>
          </div>
          <span class="operador">=</span>
          <div class="fraccion-suma">
            <span class="numerador">{{calcularFraccionEquivalente(ejemplo.flores, ejemplo.mcmJardin).numerador}} + {{calcularFraccionEquivalente(ejemplo.cesped, ejemplo.mcmJardin).numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.mcmJardin}}</span>
          </div>
          <span class="operador">=</span>
          <div class="fraccion-suma resultado">
            <span class="numerador">{{ejemplo.resultadoJardin.numerador}}</span>
            <span class="linea"></span>
            <span class="denominador">{{ejemplo.resultadoJardin.denominador}}</span>
          </div>
        </div>

        <p class="conclusion">Ha plantado <span class="fraccion-inline destacado">{{ejemplo.resultadoJardin.numerador}}/{{ejemplo.resultadoJardin.denominador}}</span> del jard√≠n.</p>
      </div>
    </div>
  </div>

  <!-- Reglas resumidas -->
  <div class="reglas-resumen">
    <div class="regla-box">
      <div class="icono">‚ûï</div>
      <p><strong>Para sumar varias fracciones de igual denominador,</strong> se suman los numeradores y se deja el mismo denominador.</p>
    </div>
    <div class="regla-box">
      <div class="icono">üîÑ</div>
      <p><strong>Para sumar varias fracciones de distinto denominador,</strong> se reducen las fracciones a com√∫n denominador y despu√©s se suman los numeradores y se deja el denominador com√∫n.</p>
    </div>
  </div>

  <nav class="navigation">
    <a routerLink="/" class="btn btn-home">üè† Inicio</a>
    <a routerLink="/ejemplo" class="btn btn-next">‚û°Ô∏è Ver Ejemplos</a>
  </nav>
</div>